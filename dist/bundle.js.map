{
  "version": 3,
  "sources": ["../src/elements.js", "../src/utils.js", "../src/state.js", "../src/render.js", "../src/events.js", "../src/events_days.js", "../src/main.js"],
  "sourcesContent": ["export const elements = {\r\n    // tabs\r\n    tabs: document.getElementById('tabs'),\r\n    // tables\r\n    hoursTable: document.getElementById('hoursTable'),\r\n    hoursTableBody: document.getElementById('hoursTableBody'),\r\n    summary: document.getElementById('summary'),\r\n    // hours-summary\r\n    hoursLogged: document.querySelector('.hours-logged .number'),\r\n    hoursLeft: document.querySelector('.hours-left .number'),\r\n    breakTime: document.querySelector('.break-time .number'),\r\n    ticketsCount: document.querySelector('.tickets-count .number'),\r\n    ticketsCountLabel: document.querySelector('.tickets-count .label'),\r\n    // hours-summary timeline\r\n    hoursTimeline: document.querySelector('.timeline .done'),\r\n    hoursTimelineHighlight: document.querySelector('.timeline .highlight'),\r\n    hoursTimelineBreak: document.querySelector('.timeline .break'),\r\n    hoursTimelineMeeting: document.querySelector('.timeline .meeting'),\r\n    // buttons\r\n    toggleSummaryBtn: document.getElementById('toggleSummaryBtn'),\r\n    // days\r\n    addDayBtn: document.getElementById('addDayBtn'),\r\n    addDayInput: document.getElementById('addDayInput'),\r\n    editDayBtn: document.getElementById('editDayBtn'),\r\n    editDayInput: document.getElementById('editDayInput'),\r\n    saveEditDayBtn: document.getElementById('saveEditDayBtn'),\r\n    cancelEditDayBtn: document.getElementById('cancelEditDayBtn'),\r\n    deleteDayBtn: document.getElementById('deleteDayBtn')\r\n};", "// Identifiers\r\n\r\nexport function uid() {\r\n    return 'e' + Date.now().toString(36) + Math.random().toString(36).slice(2, 8);\r\n}\r\n\r\nexport function todayKey() {\r\n    const d = new Date();\r\n    return `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}`;\r\n}\r\n\r\n// HTML\r\n\r\nexport function findLast(arr, predicate) {\r\n    for (let i = arr.length - 1; i >= 0; i--) {\r\n        if (predicate(arr[i])) return arr[i];\r\n    }\r\n    return null;\r\n}\r\n\r\n// Time\r\n\r\nexport function timeNow() {\r\n    const d = new Date();\r\n    return `${pad(d.getHours())}:${pad(d.getMinutes())}`;\r\n}\r\n\r\nexport function parseHM(time) {\r\n    if (!time || !/^\\d{2}:\\d{2}$/.test(time)) return null;\r\n    const [h, m] = time.split(':').map(Number);\r\n    if (h > 23 || m > 59) return null;\r\n    return h * 60 + m;\r\n}\r\n\r\n// Format Time\r\n\r\nexport const pad = (n) => String(n).padStart(2, '0');\r\n\r\nexport function formatHM(minutes) {\r\n    const h = Math.floor(minutes / 60);\r\n    const m = minutes % 60;\r\n    return `${h}:${pad(m)}`;\r\n}\r\n\r\nexport function formatMinutes(minutes) {\r\n    const h = Math.floor(minutes / 60);\r\n    const m = minutes % 60;\r\n    if (h > 0) {\r\n        return `${h}h ${m}m`;\r\n    }\r\n    return `${m}m`;\r\n}\r\n\r\n// Format Text\r\n\r\nexport function formatDayName(dateStr) {\r\n    const [year, monthNum, dayNum] = dateStr.split('-').map(Number);\r\n    const date = new Date(year, monthNum - 1, dayNum);\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n\r\n    const oneDayMs = 1000 * 60 * 60 * 24;\r\n    const daysDiff = Math.round((today - date) / oneDayMs);\r\n\r\n    // if (daysDiff === 0) return 'Today';\r\n    // if (daysDiff === 1) return 'Yesterday';\r\n\r\n    const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n    const dayFullNames = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\r\n    const monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\r\n\r\n    const dayName = dayNames[date.getDay()];\r\n    const dayFullName = dayFullNames[date.getDay()];\r\n    const month = monthNames[date.getMonth()];\r\n    const day = date.getDate();\r\n\r\n    // Today\r\n    if (daysDiff === 0) return `${dayFullName}, ${month} ${day}`;\r\n\r\n    // This week\r\n    const startOfWeek = new Date(today);\r\n    const dayIndex = today.getDay() || 7; // convert Sunday (0) -> 7 to consider monday as the first day\r\n    startOfWeek.setDate(today.getDate() - (dayIndex - 1));\r\n    startOfWeek.setHours(0, 0, 0, 0);\r\n\r\n    if (date >= startOfWeek) {\r\n        return dayName;\r\n    }\r\n\r\n    // Last week\r\n    const startOfLastWeek = new Date(startOfWeek);\r\n    startOfLastWeek.setDate(startOfWeek.getDate() - 7);\r\n\r\n    if (date >= startOfLastWeek) {\r\n        return `Last ${dayName}`;\r\n    }\r\n\r\n    // Older dates\r\n    return `${day} ${month}`;\r\n}\r\n\r\nexport function escapeHtml(str) {\r\n    return String(str)\r\n        .replaceAll('&', '&amp;')\r\n        .replaceAll('<', '&lt;')\r\n        .replaceAll('>', '&gt;');\r\n}\r\n\r\n// Entry\r\n\r\nexport function findTicketNumber(desc) {\r\n    // const match = desc.match(/\\b[a-zA-Z]+-\\d+\\b/);\r\n    // return match ? match[0] : null;\r\n    if (!desc) return null;\r\n    return desc.match(/\\b[a-zA-Z]+-\\d+\\b/);\r\n}\r\n\r\nexport function identifyTicketType(desc) {\r\n    if (!desc) return 0;\r\n    if (findTicketNumber(desc)) return 1;\r\n    if (desc.includes(\"meet\")) return 2;\r\n    if (desc.includes(\"ara\")) return 3;\r\n    return 0;\r\n}", "import {todayKey} from './utils.js';\r\nimport {renderAll} from \"./render\";\r\n\r\nconst STORAGE_KEY = 'simpleTimesheetV3';\r\n\r\nlet state = loadState();\r\n\r\nif (!state.days) state.days = {};\r\nif (!state.openDay) state.openDay = todayKey();\r\n\r\nensureDay(state.openDay);\r\nsaveState();\r\n\r\nexport function getState() {\r\n    return state;\r\n}\r\n\r\nfunction loadState() {\r\n    try {\r\n        return JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};\r\n    } catch {\r\n        return {};\r\n    }\r\n}\r\n\r\nexport function saveState() {\r\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(state));\r\n}\r\n\r\n/**\r\n * Initiates the day if it isn't created yet\r\n */\r\nexport function ensureDay(day) {\r\n    if (!state.days[day]) state.days[day] = [];\r\n}\r\n\r\nexport function setOpenDay(day) {\r\n    state.openDay = day;\r\n    ensureDay(day);\r\n    saveState();\r\n    renderAll();\r\n}\r\n", "import {elements} from './elements.js';\r\nimport {getState, saveState, setOpenDay} from './state.js';\r\nimport {\r\n    escapeHtml,\r\n    findTicketNumber,\r\n    formatDayName,\r\n    formatMinutes,\r\n    identifyTicketType,\r\n    parseHM,\r\n    todayKey\r\n} from './utils.js';\r\n\r\nconst state = getState();\r\nconst gapRows = new Map();\r\n\r\n\r\nexport function renderAll(scrollBottom = false) {\r\n    // return\r\n    renderTabs();\r\n    renderTable();\r\n    updateDayTotal();\r\n    renderSummary();\r\n\r\n    if (scrollBottom) {\r\n        elements.hoursTableBody.parentElement.scrollTop = elements.hoursTableBody.scrollHeight;\r\n    }\r\n}\r\n\r\n// Tabs\r\n\r\nexport function renderTabs() {\r\n    const today = todayKey();\r\n    const allDays = new Set(Object.keys(state.days || {}));\r\n    allDays.add(today);\r\n\r\n    // Order: today first, then others newest to oldest\r\n    const otherDays = Array.from(allDays)\r\n        .filter(d => d !== today)\r\n        .sort((a, b) => b.localeCompare(a));\r\n    const orderedDays = [today, ...otherDays];\r\n\r\n    elements.tabs.innerHTML = '';\r\n\r\n    orderedDays.forEach(day => {\r\n        const tabEl = document.createElement('div');\r\n        tabEl.className = 'tab' + (day === state.openDay ? ' active' : '');\r\n        tabEl.textContent = formatDayName(day);\r\n        tabEl.title = day;\r\n        tabEl.addEventListener('click', () => setOpenDay(day));\r\n        elements.tabs.appendChild(tabEl);\r\n    });\r\n}\r\n\r\n// Table\r\n\r\nexport function renderTable() {\r\n    const entries = state.days[state.openDay] || [];\r\n    const tbody = elements.hoursTableBody;\r\n    tbody.innerHTML = '';\r\n    gapRows.clear();\r\n\r\n    entries.forEach((entry, index) => {\r\n        const row = createTableRow(entry, index, entries);\r\n        tbody.appendChild(row);\r\n\r\n        // Create gap after previous entry\r\n        if (index > 0) updateGapAfter(entries[index - 1]);\r\n    });\r\n}\r\n\r\nexport function createTableRow(entry, index, entries) {\r\n    const tr = document.createElement('tr');\r\n    tr.dataset.entryId = entry.id;\r\n\r\n    tr.ondragover = (ev) => ev.preventDefault();\r\n    tr.ondrop = (ev) => {\r\n        ev.preventDefault();\r\n        const from = +ev.dataTransfer.getData('text/plain');\r\n        const to = index;\r\n        if (from !== to) {\r\n            const item = entries.splice(from, 1)[0];\r\n            entries.splice(to, 0, item);\r\n            saveState();\r\n            renderAll();\r\n        }\r\n    };\r\n\r\n    const durationCell = createDurationCell();\r\n\r\n    // Create start and end cells and update duration when input changes\r\n    const startCell = createTimeCell(entry, 'start', () => updateDurationCell(entry, durationCell));\r\n    const endCell = createTimeCell(entry, 'end', () => updateDurationCell(entry, durationCell));\r\n\r\n    tr.appendChild(startCell);\r\n    tr.appendChild(endCell);\r\n    tr.appendChild(durationCell);\r\n    tr.appendChild(createTypeCell(entry));\r\n    tr.appendChild(createDescriptionCell(entry));\r\n    tr.appendChild(createDeleteCell(index, entries));\r\n    tr.appendChild(createDragHandleCell(index));\r\n\r\n    // Initialize duration immediately\r\n    updateDurationCell(entry, durationCell);\r\n\r\n    return tr;\r\n}\r\n\r\nexport function createTimeCell(entry, field, onChange) {\r\n    const td = document.createElement('td');\r\n    const input = document.createElement('input');\r\n    input.type = 'time';\r\n    input.step = 60;\r\n    input.value = entry[field] || '';\r\n\r\n    input.oninput = () => {\r\n        entry[field] = input.value;\r\n        saveState();\r\n        updateDayTotal();\r\n\r\n        // Update gap after this entry and gap after previous entry\r\n        const entries = state.days[state.openDay] || [];\r\n        const index = entries.indexOf(entry);\r\n        if (index > 0) updateGapAfter(entries[index - 1]);\r\n        updateGapAfter(entry);\r\n\r\n        if (onChange) onChange();\r\n    };\r\n\r\n    td.appendChild(input);\r\n    return td;\r\n}\r\n\r\nexport function createDurationCell() {\r\n    const td = document.createElement('td');\r\n    td.textContent = '-'; // default\r\n    return td;\r\n}\r\n\r\nexport function updateDurationCell(entry, td) {\r\n    if (entry.start && entry.end) {\r\n        const start = parseHM(entry.start);\r\n        const end = parseHM(entry.end);\r\n        const minutes = end - start;\r\n        if (minutes === 0)\r\n            td.textContent = '';\r\n        else td.textContent = formatMinutes(minutes);\r\n    } else {\r\n        td.textContent = '';\r\n    }\r\n}\r\n\r\nexport function createDescriptionCell(entry) {\r\n    const td = document.createElement('td');\r\n    const input = document.createElement('input');\r\n    input.type = 'text';\r\n    // console.log(entry);\r\n    input.placeholder = (entry.type && entry.type === 3) ? 'Break' : 'Description';\r\n    input.value = entry.desc || '';\r\n    input.oninput = () => {\r\n        entry.desc = input.value;\r\n\r\n        // identify entry type based on description\r\n        const identifiedType = identifyTicketType(entry.desc);\r\n        // update entry type and row icon\r\n        const row = input.closest('tr');\r\n        const btn = row.querySelector('button.action.type');\r\n        btn.textContent = types[identifiedType].emoji;\r\n        entry.type = identifiedType;\r\n        updateDayTotal();\r\n\r\n        saveState();\r\n    };\r\n    input.addEventListener('keydown', e => {\r\n        if ((e.key === 'Backspace' || e.key === 'Delete') && input.value === '') {\r\n            const row = input.closest('tr');\r\n            const btn = row.querySelector('button.action.delete');\r\n            btn.click();\r\n        }\r\n        // if (e.key === 'Enter') {\r\n        //     onNew();\r\n        // }\r\n    });\r\n    td.appendChild(input);\r\n    return td;\r\n}\r\n\r\n// Table Row Actions\r\n\r\nconst types = [\r\n    {label: \"Work\", emoji: \"\uD83D\uDCC4\"},\r\n    {label: \"Ticket\", emoji: \"\uD83D\uDCD8\uFE0F\"},\r\n    {label: \"Meeting\", emoji: \"\uD83D\uDCDE\"},\r\n    {label: \"Break\", emoji: \"\uD83E\uDDCB\"},\r\n];\r\n\r\nexport function createTypeCell(entry) {\r\n    const td = document.createElement('td');\r\n    const btn = document.createElement('button');\r\n    btn.classList.add('action');\r\n    btn.classList.add('bigger');\r\n    btn.classList.add('type');\r\n    btn.classList.add('type-' + entry.type);\r\n\r\n    // default type if not set\r\n    // if (typeof entry.type !== \"number\") {\r\n    //     entry.type = 0; // Work\r\n    // }\r\n    //\r\n    // if (entry.type === 99) {\r\n    //     // entry.type = 0;\r\n    // }\r\n    btn.textContent = types[entry.type].emoji;\r\n\r\n    // cycle to next type\r\n    btn.onclick = () => {\r\n        btn.classList.remove('type-' + entry.type);\r\n        entry.type = (entry.type + 1) % types.length;\r\n        btn.textContent = types[entry.type].emoji;\r\n        btn.classList.add('type-' + entry.type);\r\n        saveState();\r\n        updateDayTotal();\r\n    };\r\n\r\n    td.appendChild(btn);\r\n    return td;\r\n}\r\n\r\nexport function createDeleteCell(index, entries) {\r\n    const td = document.createElement('td');\r\n    const deleteBtn = document.createElement('button');\r\n    deleteBtn.classList.add('action', 'delete');\r\n    deleteBtn.textContent = 'x';\r\n    deleteBtn.onclick = () => {\r\n        if (confirm('Delete this entry?')) {\r\n            entries.splice(index, 1);\r\n            saveState();\r\n            renderAll();\r\n        }\r\n    };\r\n\r\n    td.appendChild(deleteBtn);\r\n    return td;\r\n}\r\n\r\nexport function createDragHandleCell(index) {\r\n    const td = document.createElement('td');\r\n    const handle = document.createElement('span');\r\n    handle.classList.add('action');\r\n    handle.textContent = '\u2630'; // you can replace with an SVG/icon\r\n    handle.draggable = true;\r\n\r\n    handle.ondragstart = (ev) => {\r\n        ev.dataTransfer.setData('text/plain', index);\r\n\r\n        // Create a temporary clone of the row for drag image\r\n        const tr = handle.closest('tr');\r\n        const dragClone = tr.cloneNode(true);\r\n        dragClone.style.position = 'absolute';\r\n        dragClone.style.top = '-9999px'; // hide offscreen\r\n        document.body.appendChild(dragClone);\r\n\r\n        // Use the clone as the drag image\r\n        ev.dataTransfer.setDragImage(dragClone, 0, 0);\r\n\r\n        // Remove it shortly after\r\n        setTimeout(() => document.body.removeChild(dragClone), 0);\r\n    };\r\n\r\n    td.appendChild(handle);\r\n    return td;\r\n}\r\n\r\n// Table Row Gap\r\n\r\nexport function createGapRow(minutes, isOverlap = false) {\r\n    const tr = document.createElement('tr');\r\n    tr.classList.add('gap-row');\r\n    tr.appendChild(document.createElement('td'));\r\n    tr.appendChild(document.createElement('td'));\r\n\r\n    const duration = document.createElement('td');\r\n    duration.textContent = `${formatMinutes(minutes)}`;\r\n    tr.appendChild(duration);\r\n    tr.appendChild(document.createElement('td'));\r\n\r\n    const desc = document.createElement('td');\r\n    const descInput = document.createElement('input');\r\n    desc.colSpan = 3;\r\n    descInput.type = 'text';\r\n    descInput.value = `${isOverlap ? 'Overlap' : 'Gap'}`;\r\n    descInput.disabled = true;\r\n    desc.appendChild(descInput);\r\n    tr.appendChild(desc);\r\n    return tr;\r\n}\r\n\r\nexport function updateGapAfter(prevEntry) {\r\n    const entries = state.days[state.openDay] || [];\r\n    const tbody = elements.hoursTableBody;\r\n    const index = entries.indexOf(prevEntry);\r\n    if (index === -1) return;\r\n\r\n    const nextEntry = entries[index + 1];\r\n\r\n    // Remove old gap/overlap row if exists\r\n    if (gapRows.has(prevEntry.id)) {\r\n        gapRows.get(prevEntry.id).remove();\r\n        gapRows.delete(prevEntry.id);\r\n    }\r\n\r\n    if (nextEntry && prevEntry.end && nextEntry.start) {\r\n        const prevEnd = parseHM(prevEntry.end);\r\n        const nextStart = parseHM(nextEntry.start);\r\n        const diff = nextStart - prevEnd;\r\n\r\n        if (diff !== 0) { // gap or overlap\r\n            const gapRow = createGapRow(Math.abs(diff), diff < 0); // negative \u2192 overlap\r\n            gapRows.set(prevEntry.id, gapRow);\r\n\r\n            const prevRow = tbody.querySelector(`tr[data-entry-id=\"${prevEntry.id}\"]`);\r\n            if (prevRow) {\r\n                tbody.insertBefore(gapRow, prevRow.nextSibling);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// Summary\r\n\r\nexport function renderSummary() {\r\n    const entries = state.days[state.openDay] || [];\r\n    const grouped = []; // will store { type, key, minutes, descs }\r\n\r\n    // Count totals for matching entries\r\n    for (const entry of entries) {\r\n        const start = parseHM(entry.start);\r\n        const end = parseHM(entry.end);\r\n\r\n        if (start === null || end === null || end < start) continue;\r\n\r\n        const minutes = end - start;\r\n        const entryDesc = entry.desc || \"(no description)\";\r\n        const entryType = entry.type ?? 0;\r\n\r\n        // Try to detect a Jira ticket key, e.g. \"TUE-250\"\r\n        const ticketMatch = findTicketNumber(entryDesc);\r\n\r\n        let key, desc;\r\n        if (!ticketMatch) {\r\n            key = entryDesc;\r\n            desc = null;\r\n        } else {\r\n            const ticketKey = ticketMatch[0].toUpperCase();\r\n            const ticketDesc = entryDesc.replace(ticketMatch[0], \"\").trim();\r\n            key = ticketKey;\r\n            desc = ticketDesc || null;\r\n        }\r\n\r\n        // find or create group\r\n        let group = grouped.find(g => g.type === entryType && g.key === key);\r\n        if (!group) {\r\n            group = {type: entryType, key, minutes: 0, descs: new Set()};\r\n            grouped.push(group);\r\n        }\r\n\r\n        group.minutes += minutes;\r\n        if (desc) group.descs.add(desc);\r\n    }\r\n\r\n    // No table\r\n    if (grouped.length === 0) {\r\n        elements.summary.innerHTML =\r\n            '<div class=\"muted\">Summary will appear here for completed entries.</div>';\r\n        return;\r\n    }\r\n\r\n    // Sort: first by type, then by key alphabetically\r\n    const typeOrder = {\r\n        0: 2, // work\r\n        1: 0, // ticket\r\n        2: 1, // meet\r\n        3: 3, // break\r\n    };\r\n    grouped.sort((a, b) => {\r\n        const orderA = typeOrder[a.type] ?? 999;\r\n        const orderB = typeOrder[b.type] ?? 999;\r\n        if (orderA !== orderB) return orderA - orderB;\r\n        return a.key.localeCompare(b.key); // within type: A\u2013Z\r\n    });\r\n\r\n    // Build table\r\n    let html = `\r\n        <table id=\"summaryTable\">\r\n            <thead>\r\n                <tr>\r\n                    <th style=\"width:110px;\"></th>\r\n                    <th style=\"width:110px;\"></th>\r\n                    <th style=\"width:64px;\">Duration</th>\r\n                    <th style=\"width:14px;\">Type</th>\r\n                    <th>Description</th>\r\n                    <th style=\"width:64px;\"></th>\r\n                    <th style=\"width:64px;\"></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n    `;\r\n\r\n    // Build rows\r\n    for (const g of grouped) {\r\n        let description = g.key;\r\n        if (g.descs.size > 0) {\r\n            description += \" - \" + [...g.descs].join(\", \");\r\n        }\r\n\r\n        html += `\r\n            <tr disabled=\"true\">\r\n                <td><input type=\"time\" step=\"60\" style=\"visibility: hidden\"></td>\r\n                <td><input type=\"time\" step=\"60\" style=\"visibility: hidden\"></td>\r\n                <td>${formatMinutes(g.minutes)}</td>\r\n                <td><button class=\"action bigger type\" disabled>${types[g.type]?.emoji || \"\"}</button></td>\r\n                <td><input type=\"text\" value=\"${escapeHtml(description)}\" disabled/></td>\r\n                <td></td>\r\n                <td></td>\r\n            </tr>\r\n        `;\r\n    }\r\n\r\n    html += \"</tbody></table>\";\r\n    elements.summary.innerHTML = html;\r\n}\r\n\r\nexport function updateDayTotal() {\r\n    const entries = state.days[state.openDay] || [];\r\n    const minutes = {ticket: 0, meeting: 0, break: 0, other: 0, total: 0};\r\n    const uniqueTickets = new Set();\r\n\r\n    // count total minutes per entry type\r\n    for (const entry of entries) {\r\n        const start = parseHM(entry.start);\r\n        const end = parseHM(entry.end);\r\n\r\n        if (start !== null && end !== null && end >= start) {\r\n            const duration = end - start;\r\n            const ticketMatch = findTicketNumber(entry.desc);\r\n            if (entry.type === 1 || ticketMatch) {\r\n                uniqueTickets.add(ticketMatch ? ticketMatch[0] : \"(no ticket number)\");\r\n                minutes.ticket += duration;\r\n            } else if (entry.type === 2)\r\n                minutes.meeting += duration;\r\n            else if (entry.type === 3)\r\n                minutes.break += duration;\r\n            else minutes.other += duration;\r\n        }\r\n    }\r\n\r\n    // sum total\r\n    minutes.total = minutes.ticket + minutes.meeting + minutes.break + minutes.other;\r\n    // hours\r\n    elements.hoursLogged.textContent = formatMinutes(minutes.total);\r\n    elements.hoursLeft.textContent = formatMinutes((8 * 60) - minutes.total);\r\n    elements.breakTime.textContent = formatMinutes(minutes.break);\r\n    // ticket count\r\n    elements.ticketsCount.textContent = uniqueTickets.size + \"\";\r\n    elements.ticketsCountLabel.textContent = uniqueTickets.size === 1 ? \"ticket\" : \"tickets\";\r\n    // timeline percentage based on 8 hours\r\n    const maxDayMinutes = 8 * 60;\r\n    elements.hoursTimeline.style.width = (minutes.other / maxDayMinutes) * 100 + '%';\r\n    elements.hoursTimelineHighlight.style.width = (minutes.ticket / maxDayMinutes) * 100 + '%';\r\n    elements.hoursTimelineBreak.style.width = (minutes.break / maxDayMinutes) * 100 + '%';\r\n    elements.hoursTimelineMeeting.style.width = (minutes.meeting / maxDayMinutes) * 100 + '%';\r\n}\r\n\r\n// Other\r\n\r\nexport function focusLastDescription() {\r\n    const inputs = elements.hoursTableBody.querySelectorAll('input[type=\"text\"]');\r\n    if (inputs.length) {\r\n        inputs[inputs.length - 1].focus();\r\n    }\r\n}", "import {getState, saveState} from './state.js';\r\nimport {findLast, parseHM, timeNow, uid} from './utils.js';\r\nimport {focusLastDescription, renderAll} from './render.js';\r\n\r\nconst state = getState();\r\n\r\nfunction newEntry(start, end, desc, type) {\r\n    return {\r\n        id: uid(),\r\n        start: start,\r\n        end: end,\r\n        desc: desc,\r\n        type: type,\r\n    };\r\n}\r\n\r\n// Start / Stop\r\n\r\nfunction stopLast() {\r\n    const entries = state.days[state.openDay];\r\n    const running = findLast(entries, e => e.start && !e.end);\r\n\r\n    if (running && !running.end) {\r\n        running.end = timeNow();\r\n        saveState();\r\n        renderAll(true);\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction startNew() {\r\n    const entries = state.days[state.openDay];\r\n    entries.push(newEntry(timeNow(), '', '', 0));\r\n    saveState();\r\n    renderAll(true);\r\n    focusLastDescription();\r\n}\r\n\r\nfunction startBreakSinceLast() {\r\n    // console.log(\"me\")\r\n    const entries = state.days[state.openDay];\r\n    // Check for gap between last entry and now\r\n    const lastEntry = entries[entries.length - 1];\r\n    // create gap entry\r\n    if (lastEntry && lastEntry.end) {\r\n        // console.log(\"=1\")\r\n        const lastEnd = parseHM(lastEntry.end);\r\n        const nowHM = parseHM(timeNow());\r\n        if (nowHM >= lastEnd) {\r\n            // console.log(\"=2\")\r\n            entries.push(newEntry(lastEntry.end, '', '', 3));\r\n            saveState();\r\n            renderAll(true);\r\n            focusLastDescription();\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * If no input is focused, redirect keystrokes to quick entry input\r\n */\r\nexport function onDocumentKeyDown(e) {\r\n    // Ignore modifier keys\r\n    if (e.metaKey || e.ctrlKey || e.altKey) return;\r\n\r\n    const active = document.activeElement;\r\n    const focusedOnInput = active && active.tagName === 'INPUT';\r\n    const focusedOnTime = focusedOnInput && active.type === 'time';\r\n    const focusedOnText = focusedOnInput && active.type === 'text';\r\n\r\n\r\n    // Handle arrow navigation between inputs\r\n    if (!focusedOnTime && (e.key === 'ArrowUp' || e.key === 'ArrowDown')) {\r\n        handleArrowNavigation(e, active);\r\n        return;\r\n    }\r\n\r\n    if (focusedOnInput && (e.key === 'Enter' || e.key === 'Escape')) {\r\n        active.blur();\r\n        return;\r\n    }\r\n\r\n    if (!focusedOnInput && e.key === ' ') {\r\n        if (!stopLast()) {\r\n            e.preventDefault();\r\n            startBreakSinceLast();\r\n            return;\r\n        }\r\n    }\r\n\r\n    if (!focusedOnInput && e.key === 'Enter') {\r\n        if (!stopLast()) {\r\n            startNew();\r\n            return;\r\n        }\r\n    }\r\n\r\n    // Handle global typing when no input focused\r\n}\r\n\r\n/**\r\n * Navigate to other entries\r\n */\r\nfunction handleArrowNavigation(e, active) {\r\n    const inputs = Array.from(document.querySelectorAll('input[type=\"text\"]:not([disabled])'));\r\n    if (inputs.length === 0) return;\r\n\r\n    let index = inputs.indexOf(active);\r\n\r\n    // If nothing valid is focused \u2192 pick last input\r\n    if (index === -1) {\r\n        inputs[inputs.length - 1].focus();\r\n        e.preventDefault();\r\n        return;\r\n    }\r\n\r\n    if (e.key === 'ArrowUp' && index > 0) {\r\n        inputs[index - 1].focus();\r\n        e.preventDefault();\r\n    } else if (e.key === 'ArrowDown' && index < inputs.length - 1) {\r\n        inputs[index + 1].focus();\r\n        e.preventDefault();\r\n    }\r\n}", "import {elements} from \"./elements\";\r\nimport {ensureDay, getState, saveState, setOpenDay} from \"./state\";\r\nimport {renderAll, renderSummary} from \"./render\";\r\nimport {todayKey} from \"./utils\";\r\n\r\nconst state = getState();\r\n\r\n// Summary\r\n\r\nexport function toggleSummary() {\r\n    renderSummary();\r\n    elements.hoursTable.classList.toggle('hidden');\r\n    elements.summary.classList.toggle('hidden');\r\n}\r\n\r\n// Days\r\n\r\nexport function onAddDay() {\r\n    if (elements.addDayInput.value) {\r\n        setOpenDay(elements.addDayInput.value);\r\n        elements.addDayInput.value = '';\r\n    }\r\n}\r\n\r\nexport function onEditDay() {\r\n    elements.editDayInput.value = state.openDay;\r\n    elements.editDayInput.style.display = 'inline-block';\r\n    elements.saveEditDayBtn.style.display = 'inline-block';\r\n    elements.cancelEditDayBtn.style.display = 'inline-block';\r\n    elements.editDayInput.focus();\r\n}\r\n\r\nexport function onCancelEditDay() {\r\n    elements.editDayInput.style.display = 'none';\r\n    elements.saveEditDayBtn.style.display = 'none';\r\n    elements.cancelEditDayBtn.style.display = 'none';\r\n}\r\n\r\nexport function onSaveEditDay() {\r\n    const newDate = elements.editDayInput.value;\r\n    const oldDate = state.openDay;\r\n\r\n    if (!newDate) {\r\n        alert('Pick a valid date');\r\n        return;\r\n    }\r\n\r\n    if (newDate === oldDate) {\r\n        onCancelEditDay();\r\n        return;\r\n    }\r\n\r\n    // Handle existing target date\r\n    if (state.days[newDate]) {\r\n        if (!confirm('Target day already exists. Merge current entries into that day?')) {\r\n            return;\r\n        }\r\n        // Merge entries\r\n        state.days[newDate] = (state.days[newDate] || []).concat(state.days[oldDate]);\r\n    } else {\r\n        // Move entries\r\n        state.days[newDate] = state.days[oldDate];\r\n    }\r\n\r\n    delete state.days[oldDate];\r\n    state.openDay = newDate;\r\n    saveState();\r\n    renderAll();\r\n    onCancelEditDay();\r\n}\r\n\r\nexport function onDeleteDay() {\r\n    if (!confirm('Delete all entries for this day? This cannot be undone.')) {\r\n        return;\r\n    }\r\n\r\n    delete state.days[state.openDay];\r\n    state.openDay = todayKey();\r\n    ensureDay(state.openDay);\r\n    saveState();\r\n    renderAll();\r\n}", "import {elements} from './elements.js';\r\nimport {renderAll} from './render.js';\r\nimport {onDocumentKeyDown} from './events.js';\r\nimport {onAddDay, onCancelEditDay, onDeleteDay, onEditDay, onSaveEditDay, toggleSummary} from \"./events_days\";\r\n\r\n// Attach listeners\r\n// Main Buttons\r\nelements.toggleSummaryBtn.addEventListener('click', toggleSummary);\r\n// Day Buttons\r\nelements.addDayBtn.addEventListener('click', onAddDay);\r\nelements.editDayBtn.addEventListener('click', onEditDay);\r\nelements.cancelEditDayBtn.addEventListener('click', onCancelEditDay);\r\nelements.saveEditDayBtn.addEventListener('click', onSaveEditDay);\r\nelements.deleteDayBtn.addEventListener('click', onDeleteDay);\r\n//\r\ndocument.addEventListener('keydown', onDocumentKeyDown);\r\n\r\n\r\n// Initial render\r\nrenderAll();\r\n"],
  "mappings": "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",
  "names": ["state", "state", "state"]
}
